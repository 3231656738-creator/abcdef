            <path d="M42,70 Q50,78 58,70" fill="none" stroke="#9e7c2e" stroke-width="2" opacity="0.25"/>
        </svg>
    </div>
    <!-- Bunny (bottom-right) -->
    <div class="pet-decor pet-d2" style="width:110px; height:110px; bottom:8%; right:4%;">
        <svg viewBox="0 0 100 100" fill="#9e7c2e">
            <ellipse cx="36" cy="22" rx="9" ry="24" rx="9" ry="24" opacity="0.8"/>
            <ellipse cx="64" cy="22" rx="9" ry="24" opacity="0.8"/>
            <ellipse cx="36" cy="14" rx="5" ry="18" fill="#f7ead3" opacity="0.3"/>
            <ellipse cx="64" cy="14" rx="5" ry="18" fill="#f7ead3" opacity="0.3"/>
            <ellipse cx="50" cy="62" rx="28" ry="30"/>
            <circle cx="40" cy="56" r="4" opacity="0.4"/>
            <circle cx="60" cy="56" r="4" opacity="0.4"/>
            <ellipse cx="50" cy="64" rx="3.5" ry="2.5" opacity="0.3"/>
        </svg>
    </div>
    <!-- Puppy (top-right) -->
    <div class="pet-decor pet-d3" style="width:80px; height:80px; top:12%; right:8%;">
        <svg viewBox="0 0 100 100" fill="#9e7c2e">
            <ellipse cx="20" cy="38" rx="16" ry="24" transform="rotate(-15 20 38)" opacity="0.7"/>
            <ellipse cx="80" cy="38" rx="16" ry="24" transform="rotate(15 80 38)" opacity="0.7"/>
            <circle cx="50" cy="56" r="30"/>
            <circle cx="38" cy="50" r="5" opacity="0.4"/>
            <circle cx="62" cy="50" r="5" opacity="0.4"/>
            <ellipse cx="50" cy="62" rx="7" ry="5" opacity="0.35"/>
            <path d="M44,68 Q50,74 56,68" fill="none" stroke="#9e7c2e" stroke-width="2" opacity="0.25"/>
        </svg>
    </div>
    <!-- Paw (bottom-left) -->
    <div class="pet-decor pet-d4" style="width:70px; height:70px; bottom:12%; left:8%;">
        <svg viewBox="0 0 100 100" fill="#9e7c2e">
            <ellipse cx="50" cy="66" rx="24" ry="20"/>
            <circle cx="26" cy="40" r="11"/>
            <circle cx="42" cy="28" r="11"/>
            <circle cx="60" cy="28" r="11"/>
            <circle cx="76" cy="40" r="11"/>
        </svg>
    </div>

    <!-- â•â•â• Welcome Toast â•â•â• -->
    <div id="welcomeToast" class="welcome-toast">
        <p class="font-serif-cn text-xl sm:text-2xl gold-text font-semibold" style="line-height:1.8;">
            è®©æˆ‘ä»¬ä¸€èµ·å¼€å§‹<br>å¿ƒçµçš„æ—…é€”å§ âœ¦
        </p>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â• HOME PAGE â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="page-home" class="page active">
        <div class="w-full max-w-xl mx-auto text-center relative z-10">
            <!-- Year -->
            <p class="anim-1 font-display tracking-[0.4em] text-sm mb-10 font-semibold gold-text-slow">â€” 2 0 2 6 â€”</p>
            <!-- Title -->
            <h1 class="anim-2 font-display text-5xl sm:text-6xl md:text-7xl leading-[1.1] tracking-wide text-warm-900 drop-shadow-sm">
                Find Your<br><em class="italic font-normal gold-text" style="font-size:inherit;">Inner Compass</em>
            </h1>
            <!-- Deco Line -->
            <div class="flex justify-center my-10"><div class="anim-line deco-line"></div></div>
            <!-- Subtitle -->
            <p class="anim-3 font-serif-cn text-warm-700 text-base sm:text-lg leading-loose max-w-md mx-auto font-medium">
                åœ¨è¿™ä¸ªç¢Žç‰‡åŒ–çš„æ—¶ä»£ï¼Œå¹¶éžæ¯ä¸€ç§æµ‹è¯„éƒ½èƒ½è§¦åŠä½ çš„çµé­‚ã€‚<br>
                æˆ‘ä»¬å°†é€šè¿‡ <span class="gold-text font-bold">15 ä¸ªç»´åº¦</span>ï¼Œä¸ºä½ åŒ¹é…æœ€å¥‘åˆä½ æ€ç»´åº•å±‚çš„æŽ¢ç´¢ä½“ç³»ã€‚
            </p>
            <!-- Name Input -->
            <div class="anim-5 mt-12 max-w-xs mx-auto">
                <label class="block text-xs tracking-[0.25em] uppercase mb-4 font-sans font-bold gold-text-slow">ä½ çš„ç§°å‘¼</label>
                <input id="nameInput" type="text" placeholder="è¯·è¾“å…¥ä½ çš„åå­—" class="input-warm" maxlength="20" autocomplete="off">
            </div>
            <!-- Start Button -->
            <div class="anim-6 mt-12">
                <button id="btnStart" class="btn-warm" onclick="goToCodePage()">å¼€ å¯ æ—… ç¨‹</button>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â• CODE PAGE â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="page-code" class="page">
        <div class="w-full max-w-md mx-auto text-center relative z-10">
            <div class="font-display tracking-[0.3em] text-xs mb-6 uppercase font-bold gold-text-slow">Verification</div>
            <h2 class="font-serif-cn text-3xl sm:text-4xl text-warm-900 mb-4">è¾“å…¥å…‘æ¢ç </h2>
            <p class="font-sans text-warm-600 text-sm mb-10 opacity-80">è¯·è¾“å…¥æ‚¨çš„ä¸“å±žå…‘æ¢ç ä»¥è§£é”æµ‹è¯„</p>
            <div class="max-w-xs mx-auto">
                <input id="codeInput" type="text" placeholder="è¯·è¾“å…¥å…‘æ¢ç " class="input-warm" autocomplete="off"
                    onkeydown="if(event.key==='Enter')verifyCode()">
                <p id="codeError" class="text-sm mt-3 opacity-0 transition-opacity duration-300 font-medium" style="color:#c85a5a;">å…‘æ¢ç ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°è¾“å…¥</p>
            </div>
            <div class="mt-10">
                <button class="btn-warm" onclick="verifyCode()">éªŒ è¯</button>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â• QUIZ PAGE â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="page-quiz" class="page">
        <div class="w-full max-w-2xl mx-auto relative z-10">
            <!-- Header -->
            <div class="flex justify-between items-center mb-8">
                <span id="quizUserName" class="font-serif-cn text-xl sm:text-2xl tracking-wider font-bold gold-text"></span>
                <span id="quizCategory" class="font-sans text-warm-500 text-xs tracking-[0.2em] uppercase font-bold"></span>
            </div>
            <!-- Question Number -->
            <div class="flex items-baseline gap-3 mb-3">
                <span id="qNum" class="font-display text-5xl sm:text-6xl gold-text-slow opacity-70">01</span>
                <span class="font-sans text-warm-500 text-sm font-medium">/ 15</span>
            </div>
            <div class="deco-line w-full mb-10 opacity-40"></div>
            <!-- Question Card -->
            <div id="questionCard" class="q-card">
                <h3 id="qText" class="font-serif-cn text-xl sm:text-2xl text-warm-900 leading-relaxed mb-10 font-medium" style="line-height:1.8;"></h3>
                <div id="qOptions" class="space-y-4"></div>
            </div>
            <!-- Progress -->
            <div class="mt-12 flex flex-col items-center">
                <div class="progress-track">
                    <div id="progressFill" class="progress-fill"></div>
                </div>
                <span id="progressText" class="font-sans text-warm-500 text-xs mt-3 tracking-wider font-medium"></span>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â• LOADING PAGE â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="page-loading" class="page">
        <div class="text-center relative z-10">
            <p id="loadingName" class="font-serif-cn text-xl sm:text-2xl gold-text font-semibold mb-8"></p>
            <div class="flex justify-center gap-3">
                <span class="loading-dot w-2 h-2 rounded-full inline-block" style="background:#B8860B;"></span>
                <span class="loading-dot w-2 h-2 rounded-full inline-block" style="background:#DAA520;"></span>
                <span class="loading-dot w-2 h-2 rounded-full inline-block" style="background:#B8860B;"></span>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â• RESULT PAGE â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="page-result" class="page" style="align-items:flex-start;">
        <div class="w-full max-w-2xl mx-auto py-12 sm:py-16 relative z-10">
            <!-- Magazine Header -->
            <div class="result-stagger-1 flex justify-between items-center mb-12 border-b pb-4" style="border-color:rgba(184,134,11,0.15);">
                <span class="font-display text-warm-800 text-xs tracking-[0.3em] uppercase font-bold">Inner Compass</span>
                <span class="font-display text-xs tracking-[0.3em] font-medium gold-text-slow">Vol. I Â· 2026</span>
            </div>
            <!-- Art -->
            <div class="result-stagger-2">
                <div id="resultArt" class="result-art"></div>
            </div>
            <!-- Category Label -->
            <div class="result-stagger-3 text-center mb-3">
                <span id="resultLabel" class="font-sans text-xs tracking-[0.3em] uppercase font-bold gold-text-slow"></span>
            </div>
            <!-- Result Title -->
            <h2 id="resultTitle" class="result-stagger-3 font-display text-4xl sm:text-5xl md:text-6xl text-center text-warm-900 mb-4 tracking-wide font-medium"></h2>
            <p id="resultSubtitle" class="result-stagger-3 font-display italic text-center text-xl mb-10 font-light gold-text"></p>
            <!-- Deco Line -->
            <div class="result-stagger-4 flex justify-center mb-10"><div class="deco-line" style="width:60px;"></div></div>
            <!-- Description -->
            <div id="resultDesc" class="result-stagger-4 font-serif-cn text-warm-800 text-base sm:text-lg leading-loose max-w-lg mx-auto text-center" style="line-height:2.2;"></div>
            <!-- Deco Line -->
            <div class="result-stagger-5 flex justify-center my-12"><div class="deco-line" style="width:40px;"></div></div>
            <!-- Footer -->
            <div class="result-stagger-6 text-center space-y-6">
                <button class="btn-warm" onclick="showContact()">è” ç³» æˆ‘</button>
                <div>
                    <button class="font-sans text-xs tracking-wider hover:text-warm-700 transition-colors bg-transparent border-none cursor-pointer mt-4 font-bold gold-text-slow" onclick="restart()">é‡æ–°æŽ¢ç´¢ â†º</button>
                </div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â• CONTACT MODAL â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="contactModal" class="modal-overlay" onclick="hideContact(event)">
        <div class="modal-card" onclick="event.stopPropagation()">
            <p class="font-display text-xs tracking-[0.25em] uppercase mb-5 font-bold gold-text">Contact Me</p>
            <div class="deco-line w-12 mx-auto mb-8 opacity-50"></div>
            <p class="font-serif-cn text-warm-800 text-sm mb-6">æ‰«æä¸‹æ–¹äºŒç»´ç æ·»åŠ æˆ‘çš„å¾®ä¿¡</p>
            <div class="rounded p-4 inline-block mb-6 shadow-inner border" style="background:#fefcf5; border-color:rgba(184,134,11,0.1);">
                <img src="æ–°å»ºæ–‡ä»¶å¤¹/80aff6399ae1c0e9d222e7db56bf6dfb.jpg" alt="å¾®ä¿¡äºŒç»´ç " class="w-48 h-48 object-contain mix-blend-multiply">
            </div>
            <div>
                <button class="font-sans text-xs tracking-wider hover:text-warm-800 transition-colors bg-transparent border-none cursor-pointer font-bold gold-text-slow" onclick="hideContact()">å…³é—­</button>
            </div>
        </div>
    </div>

    <script>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       DATA â€” Questions & Results
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    const questions = [
        { category: 'è®¤çŸ¥åå¥½', text: 'å½“ä½ è¯•å›¾ç†è§£ä¸€ä¸ªäººæ—¶ï¼Œä½ æœ€æƒ³çŸ¥é“çš„æ˜¯ä»€ä¹ˆï¼Ÿ', options: [
            { text: 'ä»–çš„è¡Œä¸ºåå¥½å’Œå†³ç­–æ–¹å¼', type: 'mbti' },
            { text: 'ä»–åœ¨å„ä¸ªç‰¹è´¨ç»´åº¦ä¸Šçš„ç‹¬ç‰¹ç»„åˆ', type: 'bigfive' },
            { text: 'é©±åŠ¨ä»–è¡Œä¸ºèƒŒåŽçš„æ·±å±‚åŠ¨æœºä¸Žææƒ§', type: 'enneagram' },
            { text: 'ä»–æœ€çªå‡ºçš„å¤©èµ‹å’Œä¼˜åŠ¿é¢†åŸŸ', type: 'clifton' }
        ]},
        { category: 'è®¤çŸ¥åå¥½', text: 'ä½ æ›´å€¾å‘äºŽå“ªç§è‡ªæˆ‘è®¤çŸ¥çš„æ–¹å¼ï¼Ÿ', options: [
            { text: 'é€šè¿‡æ˜Žç¡®çš„ç±»åž‹åˆ†ç±»æ¥å®šä½è‡ªå·±', type: 'mbti' },
            { text: 'é€šè¿‡å¤šç»´åº¦çš„è¯„åˆ†æ¥ç²¾ç¡®æè¿°è‡ªå·±', type: 'bigfive' },
            { text: 'é€šè¿‡æŽ¢ç´¢å†…å¿ƒçš„æ ¸å¿ƒæ¬²æœ›æ¥ç†è§£è‡ªå·±', type: 'enneagram' },
            { text: 'é€šè¿‡è¯†åˆ«å¹¶å‘æŒ¥è‡ªå·±çš„é•¿å¤„æ¥å®šä¹‰è‡ªå·±', type: 'clifton' }
        ]},
        { category: 'è®¤çŸ¥åå¥½', text: 'é¢å¯¹ä¸€ä¸ªå¤æ‚çš„äººé™…å†²çªï¼Œä½ é¦–å…ˆä¼šæ€Žä¹ˆåšï¼Ÿ', options: [
            { text: 'åˆ†æžåŒæ–¹çš„æ€§æ ¼ç±»åž‹å·®å¼‚', type: 'mbti' },
            { text: 'è€ƒè™‘å„è‡ªåœ¨æƒ…ç»ªç¨³å®šæ€§ã€å®œäººæ€§ç­‰ç»´åº¦ä¸Šçš„ä¸åŒ', type: 'bigfive' },
            { text: 'æŽ¢ç©¶å„è‡ªçš„æ ¸å¿ƒææƒ§å¦‚ä½•åœ¨æ­¤åˆ»è¢«è§¦å‘', type: 'enneagram' },
            { text: 'æ€è€ƒå¦‚ä½•åˆ©ç”¨å„è‡ªçš„ä¼˜åŠ¿æ¥åŒ–è§£åƒµå±€', type: 'clifton' }
        ]},
        { category: 'è®¤çŸ¥åå¥½', text: 'ä½ è®¤ä¸ºã€Œäº†è§£è‡ªå·±ã€æœ€ç»ˆåº”è¯¥å¸¦æ¥ä»€ä¹ˆï¼Ÿ', options: [
            { text: 'å¯¹è‡ªæˆ‘åå¥½çš„æ¸…æ™°è®¤çŸ¥ä¸ŽæŽ¥çº³', type: 'mbti' },
            { text: 'å¯¹è‡ªèº«ç‰¹è´¨çš„å®¢è§‚ã€ç§‘å­¦çš„è®¤è¯†', type: 'bigfive' },
            { text: 'æ·±åˆ»çš„ç²¾ç¥žæˆé•¿ä¸Žè‡ªæˆ‘è¶…è¶Š', type: 'enneagram' },
            { text: 'å®žé™…çš„ç»©æ•ˆæå‡å’ŒèŒä¸šå‘å±•', type: 'clifton' }
        ]},
        { category: 'è®¤çŸ¥åå¥½', text: 'åœ¨ä¸€ä¸ªç†æƒ³çš„å›¢é˜Ÿä¸­ï¼Œä½ è®¤ä¸ºæœ€é‡è¦çš„æ˜¯â€¦â€¦', options: [
            { text: 'äº†è§£æ¯ä¸ªäººçš„ç±»åž‹ï¼Œå®žçŽ°äº’è¡¥åä½œ', type: 'mbti' },
            { text: 'è¯„ä¼°å›¢é˜Ÿåœ¨å„é¡¹äººæ ¼ç‰¹è´¨ä¸Šçš„åˆ†å¸ƒ', type: 'bigfive' },
            { text: 'ç†è§£æ¯ä½æˆå‘˜çš„æ ¸å¿ƒåŠ¨æœºå’ŒåŽ‹åŠ›ååº”', type: 'enneagram' },
            { text: 'è¯†åˆ«å¹¶åˆç†é…ç½®å›¢é˜Ÿä¸­æ¯ä¸ªäººçš„ä¼˜åŠ¿', type: 'clifton' }
        ]},
        { category: 'æŽ¢ç´¢æ·±åº¦', text: 'å¦‚æžœä¸€æœ¬äººæ ¼å¿ƒç†å­¦ä¹¦ç±çš„å¼€å¤´æ˜¯è¿™æ ·çš„ï¼Œå“ªä¸€å¥æœ€å¸å¼•ä½ ï¼Ÿ', options: [
            { text: '"ä¸–ç•Œä¸Šæœ‰16ç§æ ¹æœ¬ä¸åŒçš„çœ‹å¾…ä¸–ç•Œçš„æ–¹å¼ã€‚"', type: 'mbti' },
            { text: '"äººæ ¼å¯ä»¥è¢«ç²¾ç¡®åœ°åˆ†è§£ä¸ºäº”ä¸ªç‹¬ç«‹çš„ç»´åº¦ã€‚"', type: 'bigfive' },
            { text: '"æ¯ä¸ªäººå†…å¿ƒæ·±å¤„éƒ½æœ‰ä¸€ä¸ªè¢«é—å¿˜çš„ç«¥å¹´æ¸´æœ›ã€‚"', type: 'enneagram' },
            { text: '"æŠ•èµ„ä½ çš„ä¼˜åŠ¿ï¼Œå›žæŠ¥çŽ‡å°†æ˜¯æ— é™çš„ã€‚"', type: 'clifton' }
        ]},
        { category: 'æŽ¢ç´¢æ·±åº¦', text: 'ä½ å¯¹ã€Œäººèƒ½å¦è¢«æ”¹å˜ã€è¿™ä¸ªé—®é¢˜æ€Žä¹ˆçœ‹ï¼Ÿ', options: [
            { text: 'æ ¸å¿ƒåå¥½æ˜¯å¤©ç”Ÿçš„ï¼Œä½†è¡¨è¾¾æ–¹å¼å¯ä»¥æˆç†Ÿ', type: 'mbti' },
            { text: 'ç‰¹è´¨åœ¨ä¸€å®šèŒƒå›´å†…æ˜¯å¯ä»¥å˜åŒ–å’Œå‘å±•çš„', type: 'bigfive' },
            { text: 'äººå¯ä»¥é€šè¿‡æ„è¯†è§‰é†’å®žçŽ°æ ¹æœ¬æ€§çš„å†…åœ¨è½¬åŒ–', type: 'enneagram' },
            { text: 'ä¸Žå…¶ä¿®è¡¥å¼±ç‚¹ï¼Œä¸å¦‚å°†å¤©èµ‹ç£¨ç»ƒæˆä¼˜åŠ¿', type: 'clifton' }
        ]},
        { category: 'æŽ¢ç´¢æ·±åº¦', text: 'ä½ æ›´å–œæ¬¢å“ªç§å…³äºŽè‡ªæˆ‘çš„è§£è¯»æ–¹å¼ï¼Ÿ', options: [
            { text: 'ç®€æ´çš„ç±»åž‹æ ‡ç­¾ï¼Œå¦‚"INFPâ€”â€”è°ƒåœè€…"', type: 'mbti' },
            { text: 'è¯¦ç»†çš„æ•°æ®å›¾è¡¨å’Œç™¾åˆ†ä½æ•°æŠ¥å‘Š', type: 'bigfive' },
            { text: 'æ·±å…¥çš„å™äº‹æå†™å’Œæˆé•¿è·¯å¾„æŒ‡å¼•', type: 'enneagram' },
            { text: 'èšç„¦å®žæ“çš„æ‰å¹²æŽ’åå’Œè¡ŒåŠ¨å»ºè®®', type: 'clifton' }
        ]},
        { category: 'æŽ¢ç´¢æ·±åº¦', text: 'åœ¨é€‰æ‹©èŒä¸šæ–¹å‘æ—¶ï¼Œä½ æ›´çœ‹é‡ä»€ä¹ˆï¼Ÿ', options: [
            { text: 'è¿™ä»½å·¥ä½œæ˜¯å¦ä¸Žæˆ‘çš„æ€§æ ¼ç±»åž‹ç›¸å¥‘åˆ', type: 'mbti' },
            { text: 'å®¢è§‚è¯„ä¼°æˆ‘çš„ç‰¹è´¨æ˜¯å¦åŒ¹é…å²—ä½è¦æ±‚', type: 'bigfive' },
            { text: 'è¿™ä»½å·¥ä½œæ˜¯å¦èƒ½æ»¡è¶³æˆ‘çµé­‚æ·±å¤„çš„æ¸´æ±‚', type: 'enneagram' },
            { text: 'è¿™ä»½å·¥ä½œæ˜¯å¦èƒ½è®©æˆ‘æ¯å¤©è¿ç”¨æœ€æ“…é•¿çš„äº‹', type: 'clifton' }
        ]},
        { category: 'æŽ¢ç´¢æ·±åº¦', text: 'ä½ å¦‚ä½•çœ‹å¾…äººæ ¼æµ‹è¯„çš„ã€Œç§‘å­¦æ€§ã€ï¼Ÿ', options: [
            { text: 'ç†è®ºæ¡†æž¶æ¸…æ™°ã€ä¾¿äºŽå®žé™…åº”ç”¨å°±å¥½', type: 'mbti' },
            { text: 'å¿…é¡»æœ‰ä¸¥è°¨çš„å­¦æœ¯ç ”ç©¶å’Œæ•°æ®æ”¯æ’‘', type: 'bigfive' },
            { text: 'çœŸæ­£çš„æ´žè§è¶…è¶Šäº†ä¼ ç»Ÿç§‘å­¦çš„èŒƒç•´', type: 'enneagram' },
            { text: 'èƒ½å¦å¸¦æ¥åˆ‡å®žçš„è¡Œä¸ºæ”¹å˜æ‰æ˜¯å…³é”®', type: 'clifton' }
        ]},
        { category: 'åº”ç”¨åœºæ™¯', text: 'ä½ æœ€æ¬£èµçš„äººé™…äº¤å¾€æ–¹å¼æ˜¯æ€Žæ ·çš„ï¼Ÿ', options: [
            { text: 'äº†è§£å½¼æ­¤çš„ç±»åž‹ï¼Œå‡å°‘è¯¯è§£å’Œæ‘©æ“¦', type: 'mbti' },
            { text: 'ä»¥å¼€æ”¾çš„å¿ƒæ€ç†è§£æ¯ä¸ªäººçš„ç‹¬ç‰¹ç‰¹è´¨ç»„åˆ', type: 'bigfive' },
            { text: 'æ·±å…¥å½¼æ­¤çš„å†…åœ¨ä¸–ç•Œï¼Œå»ºç«‹çµé­‚å±‚é¢çš„é“¾æŽ¥', type: 'enneagram' },
            { text: 'äº’ç›¸æ¬£èµå¹¶å€ŸåŠ©å½¼æ­¤çš„ä¼˜åŠ¿ï¼Œå…±åŒæˆå°±', type: 'clifton' }
        ]},
        { category: 'åº”ç”¨åœºæ™¯', text: 'å½“ä½ æ„Ÿåˆ°è¿·èŒ«æ—¶ï¼Œä½ é€šå¸¸ä¼šæ€Žä¹ˆåšï¼Ÿ', options: [
            { text: 'å›žåˆ°è‡ªå·±çš„ç±»åž‹å®šä¹‰ï¼Œå¯»æ‰¾æ–¹å‘æ„Ÿ', type: 'mbti' },
            { text: 'å®¢è§‚åˆ†æžè‡ªèº«çŠ¶æ€åœ¨å„ç»´åº¦ä¸Šçš„å˜åŒ–', type: 'bigfive' },
            { text: 'å‘å†…æŽ¢ç´¢ï¼Œé‡æ–°è¿žæŽ¥è‡ªå·±çš„æ ¸å¿ƒæ¸´æœ›', type: 'enneagram' },
            { text: 'å›žé¡¾è‡ªå·±æœ€æˆåŠŸçš„æ—¶åˆ»ï¼Œé‡æ–°èšç„¦ä¼˜åŠ¿', type: 'clifton' }
        ]},
        { category: 'åº”ç”¨åœºæ™¯', text: 'ä¸‹é¢å“ªä¸ªéšå–»æœ€èƒ½æè¿°ä½ ç†æƒ³ä¸­çš„ã€Œäººæ ¼åœ°å›¾ã€ï¼Ÿ', options: [
            { text: 'ä¸€é¢å¤šæ£±é•œâ€”â€”å°†ç™½å…‰åˆ†æˆæ¸…æ™°çš„è‰²å½©', type: 'mbti' },
            { text: 'ä¸€å¼ ç²¾å¯†çš„é›·è¾¾å›¾â€”â€”å…¨é¢ä¸”é‡åŒ–', type: 'bigfive' },
            { text: 'ä¸€æ¡èžºæ—‹ä¸Šå‡çš„é“è·¯â€”â€”é€šå¾€å†…åœ¨æ·±å¤„', type: 'enneagram' },
            { text: 'ä¸€æŠŠç‘žå£«å†›åˆ€â€”â€”æ¯ä¸€æŠŠåˆ€éƒ½é”‹åˆ©å®žç”¨', type: 'clifton' }
        ]},
        { category: 'åº”ç”¨åœºæ™¯', text: 'ä½ å¯¹ã€Œæ ‡ç­¾åŒ–ã€è‡ªå·±çš„æ€åº¦æ˜¯æ€Žæ ·çš„ï¼Ÿ', options: [
            { text: 'æ ‡ç­¾æ˜¯ç†è§£è‡ªæˆ‘çš„ä¾¿æ·å·¥å…·ï¼Œæˆ‘ä¹äºŽæŽ¥å—', type: 'mbti' },
            { text: 'æ¯”èµ·æ ‡ç­¾ï¼Œæˆ‘æ›´ä¿¡èµ–ç²¾ç¡®çš„æ•°æ®æè¿°', type: 'bigfive' },
            { text: 'æ ‡ç­¾å¤ªæµ…äº†ï¼Œæˆ‘è¿½æ±‚æ›´æ·±å±‚çš„è‡ªæˆ‘è®¤çŸ¥', type: 'enneagram' },
            { text: 'åªè¦è¿™ä¸ªæ ‡ç­¾èƒ½å¸®æˆ‘å‘æŒ¥ä¼˜åŠ¿ï¼Œæˆ‘ä¸ä»‹æ„', type: 'clifton' }
        ]},
        { category: 'åº”ç”¨åœºæ™¯', text: 'å¦‚æžœä½ åªèƒ½é€‰æ‹©ä¸€ç§æ–¹å¼æ¥å‘åŽè¾ˆä¼ è¾¾ã€Œè‡ªæˆ‘è®¤çŸ¥ã€çš„é‡è¦æ€§ï¼Œä½ ä¼šâ€¦â€¦', options: [
            { text: 'æ•™ä»–ä»¬ç†è§£ä¸åŒçš„äººæœ‰ä¸åŒçš„åå¥½å’Œé£Žæ ¼', type: 'mbti' },
            { text: 'å¸®ä»–ä»¬ç”¨ç§‘å­¦çš„æ–¹æ³•å®¢è§‚åœ°è®¤è¯†è‡ªå·±', type: 'bigfive' },
            { text: 'å¼•å¯¼ä»–ä»¬å€¾å¬å†…å¿ƒæœ€æ·±å¤„çš„å£°éŸ³', type: 'enneagram' },
            { text: 'å¸®ä»–ä»¬å‘çŽ°å¹¶åŸ¹å…»è‡ªå·±ç‹¬ç‰¹çš„å¤©èµ‹', type: 'clifton' }
        ]}
    ];

    const results = {
        mbti: {
            label: 'Personality Type Indicator',
            title: 'MBTI',
            titleCN: 'è¿ˆå°”æ–¯-å¸ƒé‡Œæ ¼æ–¯ç±»åž‹æŒ‡æ ‡',
            subtitle: 'The Cognitive Prism',
            art: 'radial-gradient(circle at 30% 40%, rgba(218,165,32,0.5), transparent 50%), radial-gradient(circle at 70% 60%, rgba(200,150,60,0.4), transparent 50%), radial-gradient(circle at 50% 30%, rgba(232,195,106,0.3), transparent 60%), linear-gradient(135deg, #fdf8ed 0%, #f0dfca 100%)',
            getDesc: (name) => `äº²çˆ±çš„ ${name}ï¼Œ\n\nä½ æ‹¥æœ‰ä¸€ç§æ¸…æ™°è€Œæ•é”çš„è®¤çŸ¥æ–¹å¼ã€‚ä½ å¤©ç„¶åœ°å€¾å‘äºŽé€šè¿‡ç±»åž‹åŒ–çš„æ¡†æž¶æ¥ç†è§£è¿™ä¸ªçº·ç¹å¤æ‚çš„ä¸–ç•Œâ€”â€”ä½ ç›¸ä¿¡ï¼Œäººä¸Žäººä¹‹é—´å­˜åœ¨ç€æ ¹æœ¬æ€§çš„è®¤çŸ¥å·®å¼‚ï¼Œè€Œç†è§£è¿™äº›å·®å¼‚æ˜¯ä¸€åˆ‡æ²Ÿé€šä¸Žåä½œçš„åŸºçŸ³ã€‚\n\nMBTIï¼ˆè¿ˆå°”æ–¯-å¸ƒé‡Œæ ¼æ–¯ç±»åž‹æŒ‡æ ‡ï¼‰å°†ä¸ºä½ æä¾›ä¸€é¢ç²¾å‡†çš„è®¤çŸ¥æ£±é•œã€‚å®ƒåŸºäºŽè£æ ¼çš„å¿ƒç†ç±»åž‹ç†è®ºï¼Œé€šè¿‡å››ä¸ªæ ¸å¿ƒç»´åº¦â€”â€”å¤–å‘ä¸Žå†…å‘ã€æ„Ÿè§‰ä¸Žç›´è§‰ã€æ€ç»´ä¸Žæƒ…æ„Ÿã€åˆ¤æ–­ä¸ŽçŸ¥è§‰â€”â€”ä¸ºä½ å‹¾å‹’å‡ºå±žäºŽä½ çš„åå…­åž‹äººæ ¼ç”»åƒã€‚\n\nåœ¨è¿™ä¸ªä½“ç³»ä¸­ï¼Œä½ ä¸ä»…ä¼šæ‰¾åˆ°å¯¹è‡ªæˆ‘åå¥½çš„æ¸…æ™°å®šä¹‰ï¼Œæ›´ä¼šèŽ·å¾—ä¸€æŠŠç†è§£ä»–äººçš„é’¥åŒ™ã€‚æ¯ä¸€ç§ç±»åž‹éƒ½æœ‰å…¶ç‹¬ç‰¹çš„å…‰èŠ’ä¸Žç›²åŒºï¼Œè€ŒçœŸæ­£çš„æ™ºæ…§åœ¨äºŽâ€”â€”çœ‹è§å·®å¼‚ã€å°Šé‡å·®å¼‚ã€å–„ç”¨å·®å¼‚ã€‚\n\nè¿™ä¸ä»…æ˜¯ä¸€æ¬¡æµ‹è¯„ï¼Œæ›´æ˜¯ä¸€æ¬¡ä¸Žè‡ªæˆ‘å¯¹è¯çš„é‚€è¯·ã€‚`
        },
        bigfive: {
            label: 'Five-Factor Model',
            title: 'Big Five',
            titleCN: 'å¤§äº”äººæ ¼æ¨¡åž‹',
            subtitle: 'The Precision Map',
            art: 'conic-gradient(from 0deg at 50% 50%, rgba(184,134,11,0.35) 0deg, transparent 72deg, rgba(218,165,32,0.25) 144deg, transparent 216deg, rgba(197,151,61,0.3) 288deg, transparent 360deg), radial-gradient(circle at 50% 50%, rgba(218,165,32,0.15) 30%, transparent 70%), linear-gradient(160deg, #fefcf8 0%, #f0dfca 100%)',
            getDesc: (name) => `äº²çˆ±çš„ ${name}ï¼Œ\n\nä½ æ˜¯ä¸€ä¸ªè¿½æ±‚ç²¾ç¡®ä¸Žå®¢è§‚çš„äººã€‚ä½ ä¸æ»¡è¶³äºŽç®€å•çš„æ ‡ç­¾æˆ–ç¬¼ç»Ÿçš„åˆ†ç±»â€”â€”ä½ æ¸´æœ›çš„æ˜¯ä¸€å¼ å…³äºŽè‡ªæˆ‘çš„é«˜æ¸…åœ°å›¾ï¼Œæ¯ä¸€å¤„åœ°å½¢éƒ½ç»å¾—èµ·åå¤æµ‹é‡ä¸ŽéªŒè¯ã€‚\n\nå¤§äº”äººæ ¼æ¨¡åž‹ï¼ˆOCEANï¼‰æ˜¯å½“ä»Šå¿ƒç†å­¦ç•Œæœ€å—å­¦æœ¯è®¤å¯çš„äººæ ¼ç†è®ºã€‚å®ƒä¸ä¼šç»™ä½ ä¸€ä¸ªç®€å•çš„ç±»åž‹æ ‡ç­¾ï¼Œè€Œæ˜¯é€šè¿‡äº”ä¸ªç‹¬ç«‹çš„ç‰¹è´¨ç»´åº¦â€”â€”å¼€æ”¾æ€§ã€å°½è´£æ€§ã€å¤–å‘æ€§ã€å®œäººæ€§ã€ç¥žç»è´¨â€”â€”ä¸ºä½ ç»˜åˆ¶ä¸€å¹…ç²¾å¯†çš„äººæ ¼é›·è¾¾å›¾ã€‚\n\nä½ çš„æ¯ä¸€ä¸ªç‰¹è´¨éƒ½è½åœ¨ä¸€æ¡è¿žç»­çš„å…‰è°±ä¸Šï¼Œè¿™æ„å‘³ç€ä½ çš„äººæ ¼ç”»åƒæ˜¯ç‹¬ä¸€æ— äºŒçš„ã€æ— æ³•è¢«ç®€åŒ–çš„ã€‚å¯¹äºŽä½ è¿™æ ·é‡è§†ç§‘å­¦ä¸¥è°¨æ€§å’Œæ•°æ®é©±åŠ¨çš„æ€è€ƒè€…è€Œè¨€ï¼Œå¤§äº”æ¨¡åž‹å°†æ˜¯ä½ æœ€å¯ä¿¡èµ–çš„è‡ªæˆ‘è®¤çŸ¥å·¥å…·ã€‚\n\næŽ¥å—å®ƒçš„é‚€è¯·ï¼Œç”¨æ•°æ®ä¹‹å…‰ç…§äº®ä½ å†…åœ¨çš„æ¯ä¸€ä¸ªè§’è½ã€‚`
        },
        enneagram: {
            label: 'Ancient Wisdom System',
            title: 'Enneagram',
            titleCN: 'ä¹åž‹äººæ ¼',
            subtitle: 'The Inner Spiral',
            art: 'conic-gradient(from 45deg at 50% 50%, rgba(197,151,61,0.35), rgba(218,165,32,0.25), rgba(184,134,11,0.3), rgba(197,151,61,0.35)), radial-gradient(circle at 50% 50%, transparent 25%, rgba(218,165,32,0.08) 26%, transparent 27%), linear-gradient(145deg, #fdf8ed 0%, #f0dfca 100%)',
            getDesc: (name) => `äº²çˆ±çš„ ${name}ï¼Œ\n\nä½ æ˜¯ä¸€ä¸ªçµé­‚çš„æ·±æ½œè€…ã€‚å¯¹ä½ è€Œè¨€ï¼Œè‡ªæˆ‘è®¤çŸ¥ä¸æ˜¯ä¸€å¼ æµ…å±‚çš„æ ‡ç­¾ï¼Œä¸æ˜¯ä¸€ç»„å†°å†·çš„æ•°æ®ï¼Œè€Œæ˜¯ä¸€åœºé€šå¾€å†…å¿ƒæœ€æ·±å¤„çš„æ—…ç¨‹ã€‚ä½ æƒ³çŸ¥é“çš„ä¸ä»…ä»…æ˜¯ã€Œæˆ‘æ˜¯ä»€ä¹ˆæ ·çš„äººã€ï¼Œæ›´æ˜¯ã€Œæˆ‘ä¸ºä»€ä¹ˆä¼šæˆä¸ºè¿™æ ·çš„äººã€ã€‚\n\nä¹åž‹äººæ ¼ï¼ˆEnneagramï¼‰å°†ä¸Žä½ çš„è¿™ä»½æ¸´æœ›æ·±æ·±å…±é¸£ã€‚å®ƒæ˜¯ä¸€ä¸ªå¤è€è€Œæ·±é‚ƒçš„æ™ºæ…§ä½“ç³»ï¼Œä¸åœç•™äºŽè¡Œä¸ºè¡¨è±¡ï¼Œè€Œæ˜¯ç›´æŒ‡ä½ å†…å¿ƒæœ€æ ¸å¿ƒçš„åŠ¨æœºã€æœ€æ·±å±‚çš„ææƒ§ã€ä»¥åŠæœ€æœ¬çœŸçš„æ¸´æœ›ã€‚\n\nåœ¨ä¹åž‹äººæ ¼çš„åœ°å›¾ä¸Šï¼Œæ¯ä¸€ç§ç±»åž‹éƒ½æœ‰å…¶ç‹¬ç‰¹çš„æˆé•¿è·¯å¾„â€”â€”ä»Žæ‰§å¿µåˆ°è‡ªç”±ï¼Œä»Žææƒ§åˆ°è§‰é†’ã€‚å®ƒä¸ä»…å‘Šè¯‰ä½ ã€Œä½ æ˜¯è°ã€ï¼Œæ›´ä¸ºä½ æŒ‡æ˜Žã€Œä½ å¯ä»¥æˆä¸ºè°ã€ã€‚è¿™æ¡èžºæ—‹ä¸Šå‡çš„é“è·¯ï¼Œæ­£æ˜¯ä½ çµé­‚ä¸€ç›´åœ¨å¯»æ‰¾çš„ã€‚\n\nå‡†å¤‡å¥½äº†å—ï¼Ÿè®©ä¹åž‹äººæ ¼å¸¦ä½ å›žåˆ°å†…å¿ƒçš„åŽŸç‚¹ã€‚`
        },
        clifton: {
            label: 'Strengths-Based Development',
            title: 'CliftonStrengths',
            titleCN: 'å…‹åˆ©å¤«é¡¿ä¼˜åŠ¿è¯†åˆ«',
            subtitle: 'The Strength Compass',
            art: 'linear-gradient(135deg, rgba(218,165,32,0.4) 0%, transparent 40%), linear-gradient(225deg, rgba(184,134,11,0.3) 0%, transparent 35%), linear-gradient(45deg, rgba(197,151,61,0.25) 0%, transparent 50%), linear-gradient(160deg, #fefcf8 0%, #f0dfca 100%)',
            getDesc: (name) => `äº²çˆ±çš„ ${name}ï¼Œ\n\nä½ æ˜¯ä¸€ä¸ªå¤©ç”Ÿçš„è¡ŒåŠ¨æ´¾ã€‚ä½ ç›¸ä¿¡ï¼Œè®¤è¯†è‡ªæˆ‘çš„ç»ˆæžç›®çš„ä¸æ˜¯åˆ†æžï¼Œä¸æ˜¯æ ‡è®°ï¼Œè€Œæ˜¯è¡ŒåŠ¨â€”â€”æ˜¯å°†ä½ çš„å¤©èµ‹ç£¨ç»ƒæˆçœŸå®žçš„ã€å¯ä»¥æ”¹å˜ä¸–ç•Œçš„ä¼˜åŠ¿ã€‚\n\nç›–æ´›æ™®çš„å…‹åˆ©å¤«é¡¿ä¼˜åŠ¿è¯†åˆ«ï¼ˆCliftonStrengthsï¼‰å°†ä¸Žä½ çš„è¿™ä»½ä¿¡å¿µå®Œç¾Žå…±æŒ¯ã€‚å®ƒåŸºäºŽæ•°åå¹´ã€æ•°ç™¾ä¸‡äººçš„ç ”ç©¶ï¼Œè¯†åˆ«å‡º34ä¸ªæ‰å¹²ä¸»é¢˜ã€‚ä½ çš„å‰5å¤§ä¼˜åŠ¿ä¸»é¢˜å°†ä¸ºä½ æ­ç¤ºï¼šä½ å¤©ç”Ÿæ“…é•¿ä»€ä¹ˆã€ä»€ä¹ˆæ ·çš„å·¥ä½œè®©ä½ å……æ»¡èƒ½é‡ã€ä»¥åŠå¦‚ä½•æœ‰ç­–ç•¥åœ°æŠ•èµ„ä½ çš„é•¿å¤„ä»¥èŽ·å¾—æœ€å¤§çš„å›žæŠ¥ã€‚\n\nè¿™ä¸ªä½“ç³»ä¸ä¼šè®©ä½ çº ç»“äºŽå¼±ç‚¹çš„ä¿®è¡¥ï¼Œè€Œæ˜¯å¸®ä½ å°†ç›®å…‰èšç„¦äºŽæœ€æœ‰åŠ›é‡çš„åœ°æ–¹ã€‚å¯¹äºŽä½ è¿™æ ·æ³¨é‡å®žæ•ˆã€è¿½æ±‚å“è¶Šçš„äººè€Œè¨€ï¼Œå®ƒä¸ä»…æ˜¯ä¸€ä¸ªæµ‹è¯„å·¥å…·ï¼Œæ›´æ˜¯ä¸€ä»½ä¸ªäººå‘å±•çš„æˆ˜ç•¥è“å›¾ã€‚\n\nä½ çš„ä¼˜åŠ¿å°±æ˜¯ä½ çš„æŒ‡å—é’ˆã€‚çŽ°åœ¨ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ‰¾åˆ°å®ƒã€‚`
        }
    };


    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       STATE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    let userName = '';
    let currentQ = 0;
    let scores = { mbti: 0, bigfive: 0, enneagram: 0, clifton: 0 };
    let isTransitioning = false;


    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       INIT
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    document.addEventListener('DOMContentLoaded', () => {
        initGrain();
        document.getElementById('nameInput').focus();
    });

    function initGrain() {
        const c = document.createElement('canvas');
        const size = 150;
        c.width = c.height = size;
        const cx = c.getContext('2d');
        const img = cx.createImageData(size, size);
        for (let i = 0; i < img.data.length; i += 4) {
            const v = Math.random() * 100 + 120;
            img.data[i] = v; img.data[i+1] = v; img.data[i+2] = v;
            img.data[i+3] = 16;
        }
        cx.putImageData(img, 0, 0);
        document.getElementById('grain').style.backgroundImage = `url(${c.toDataURL()})`;
    }


    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HEARTS â€” Click Interaction
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    function spawnHearts(x, y) {
        const colors = [
            'rgba(255,140,160,0.9)',
            'rgba(255,170,185,0.85)',
            'rgba(255,120,150,0.8)',
            'rgba(255,160,180,0.75)',
            'rgba(248,130,155,0.85)',
        ];
        const count = 6 + Math.floor(Math.random() * 3);
        for (let i = 0; i < count; i++) {
            const heart = document.createElement('span');
            heart.className = 'float-heart';
            heart.textContent = 'â™¥';
            const ox = (Math.random() - 0.5) * 50;
            const sz = Math.random() * 12 + 10;
            heart.style.cssText = `
                left: ${x + ox}px;
                top: ${y - 5}px;
                font-size: ${sz}px;
                color: ${colors[Math.floor(Math.random() * colors.length)]};
                animation-duration: ${1 + Math.random() * 0.8}s;
                animation-delay: ${Math.random() * 0.15}s;
            `;
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 2500);
        }
    }


    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       WELCOME TOAST
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    function showWelcomeToast(callback) {
        const toast = document.getElementById('welcomeToast');
        toast.classList.add('show');
        setTimeout(() => {
            toast.classList.remove('show');
            setTimeout(callback, 400);
        }, 2000);
    }


    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       NAVIGATION
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    function showPage(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    function goToCodePage() {
        const name = document.getElementById('nameInput').value.trim();
        if (!name) {
            const input = document.getElementById('nameInput');
            input.style.borderColor = '#c85a5a';
            input.setAttribute('placeholder', 'è¯·å…ˆè¾“å…¥ä½ çš„ç§°å‘¼');
            input.classList.add('shake');
            setTimeout(() => {
                input.classList.remove('shake');
                input.style.borderColor = '';
            }, 600);
            return;
        }
        userName = name;
        // Show welcome toast first, then go to code page
        showWelcomeToast(() => {
            showPage('page-code');
            setTimeout(() => document.getElementById('codeInput').focus(), 500);
        });
    }

    function verifyCode() {
        const code = document.getElementById('codeInput').value.trim();
        const errEl = document.getElementById('codeError');
        if (code === 'handsomeng') {
            errEl.style.opacity = '0';
            showPage('page-quiz');
            startQuiz();
        } else {
            errEl.style.opacity = '1';
            const input = document.getElementById('codeInput');
            input.classList.add('shake');
            setTimeout(() => input.classList.remove('shake'), 500);
        }
    }


    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       QUIZ
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    function startQuiz() {
        currentQ = 0;
        scores = { mbti: 0, bigfive: 0, enneagram: 0, clifton: 0 };
        document.getElementById('quizUserName').textContent = `${userName} çš„æŽ¢ç´¢ä¹‹æ—…`;
        renderQuestion();
    }

    function renderQuestion() {
        const q = questions[currentQ];
        const card = document.getElementById('questionCard');
        card.classList.remove('show');
        card.classList.add('exit');

        setTimeout(() => {
            document.getElementById('qNum').textContent = String(currentQ + 1).padStart(2, '0');
            document.getElementById('qText').textContent = q.text;
            document.getElementById('quizCategory').textContent = q.category;

            const optContainer = document.getElementById('qOptions');
            const letters = ['A', 'B', 'C', 'D'];
            optContainer.innerHTML = q.options.map((opt, i) =>
                `<button class="option-btn" onclick="selectAnswer('${opt.type}', this, event)" style="opacity:0; transform:translateY(15px); transition: all 0.5s ease ${0.1 + i * 0.08}s;">
                    <span class="font-display mr-3 text-sm font-bold opt-letter">${letters[i]}.</span>
                    <span class="opt-text">${opt.text}</span>
                </button>`
            ).join('');

            const pct = ((currentQ) / questions.length) * 100;
            document.getElementById('progressFill').style.width = pct + '%';
            document.getElementById('progressText').textContent = `${currentQ + 1} / ${questions.length}`;

            card.classList.remove('exit');
            requestAnimationFrame(() => {
                card.classList.add('show');
                optContainer.querySelectorAll('.option-btn').forEach(btn => {
                    btn.style.opacity = '1';
                    btn.style.transform = 'translateY(0)';
                });
            });
        }, currentQ === 0 ? 100 : 450);
    }

    function selectAnswer(type, btn, event) {
        if (isTransitioning) return;
        isTransitioning = true;

        btn.classList.add('selected');
        scores[type]++;

        // Spawn hearts at click position
        spawnHearts(event.clientX, event.clientY);

        setTimeout(() => {
            currentQ++;
            if (currentQ < questions.length) {
                renderQuestion();
                setTimeout(() => { isTransitioning = false; }, 500);
            } else {
